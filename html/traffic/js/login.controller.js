"use strict";app.controller("LoginController",["$scope","$state","LoginService","HelperService","$cookieStore","DataService",function(o,t,e,r,n,s){hideProgress(),o.user={countryNumber:86,countryCode:"CHN"},o.isLogin=!1,o.loginFn=function(){o.isLogin=!0,e.login(o.user).success(function(e){switch(o.isLogin=!1,e.code){case 100:n.put("caroa.user",e.data),t.go("app.home");break;default:alertError(e.msg)}})},o.enterPress=function(e){13==e.keyCode&&o.loginFn()},o.itemClickCountry=function(e){o.user.countryCode=e.code,o.user.countryNumber=e.number},o.countries=[],s.getDataList("country",o.token).success(function(e){r.getAPICode(e,function(){o.countries=e.data})})}]),app.controller("LoginAutoController",["$scope","$state","LoginService","HelperService","$cookieStore","$stateParams",function(o,t,e,r,n,s){o.user={userName:s.phone,password:s.pwd},o.loginFn=function(){e.login(o.user).success(function(e){switch(o.isLogin=!1,e.code){case 100:n.put("caroa.user",e.data),t.go("app.home");break;default:showDialog(e.msg,function(e){e.isConfirm&&history.back()},!1)}})},o.loginFn()}]),app.controller("RegisterController",["$scope","$interval","$state","$cookieStore","LoginService","HelperService","DataService",function(o,t,r,n,e,s,i){o.user={userType:1,smsType:1,countryNumber:86,countryCode:"CHN"},o.second=60,o.timer=void 0;o.getSmsCode=function(){e.getSmsCode(o.user).success(function(e){s.getAPICode(e,function(){o.timer=t(function(){--o.second,o.second<=0&&(t.cancel(o.timer),o.timer=void 0)},1e3,100)},function(){alertError(e.msg)})})},o.itemClickCountry=function(e){o.user.countryNumber=e.number,o.user.countryCode=e.code},o.countries=[],i.getDataList("country",o.token).success(function(e){s.getAPICode(e,function(){o.countries=e.data})}),o.isRegister=!1,o.register=function(){return gtag("event","sign_up",{method:"CHEOA_BEFORE_CHECK"}),$("#companyName").val()?$("#nickname").val()?$("#phone").val()?$("#code").val()?(o.isRegister=!0,gtag("event","sign_up",{method:"CHEOA_AFTER_CHECK"}),void e.register(o.user).success(function(e){s.getAPICode(e,function(){n.put("caroa.user",e.data),r.go("app.home"),o.isRegister=!1,gtag("event","sign_up",{method:"CHEOA_REGISTER"})},function(){alertError(e.msg),o.isRegister=!1,gtag("event","sign_up",{method:"CHEOA_REGISTER_FAILURE"})})})):(alertError("请输入验证码"),!1):(alertError("请输入手机号码"),!1):(alertError("请输入您的姓名"),!1):(alertError("请输入贵公司全称"),!1)}}]),app.controller("ForgetpwdController",["$scope","$interval","$state","LoginService","HelperService","DataService",function(o,t,r,e,n,s){o.user={userType:1,smsType:9,countryNumber:86,countryCode:"CHN"},o.second=60,o.timer=void 0;o.getSmsCode=function(){e.getSmsCode(o.user).success(function(e){n.getAPICode(e,function(){o.timer=t(function(){--o.second,o.second<=0&&(t.cancel(o.timer),o.timer=void 0)},1e3,100)},function(){alertError(e.msg)})})},o.isForgetPassword=!1,o.forgetPassword=function(){o.comfirmPassword==o.user.password?(o.isForgetPassword=!0,e.forgetpwd(o.user).success(function(e){n.getAPICode(e,function(){r.go("empty"),o.isForgetPassword=!1},function(){alertError(e.msg),o.isForgetPassword=!1})})):alertError("两次密码输入不一致！")},o.itemClickCountry=function(e){o.user.countryCode=e.code,o.user.countryNumber=e.number},o.countries=[],s.getDataList("country",o.token).success(function(e){n.getAPICode(e,function(){o.countries=e.data})})}]),app.controller("EmptyController",["$scope","$state","$stateParams",function(e,o,t){e.login=function(){o.go("login")}}]);