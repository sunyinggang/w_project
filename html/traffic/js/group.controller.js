"use strict";app.controller("groupController",["$scope","$state","$stateParams","$cookieStore","HelperService",function(o,r,t,e,n){o.user=e.get("caroa.user"),o.token="",o.user?o.token=o.user.token:null!=t.token?o.token=t.token:r.go("login")}]),app.controller("groupListController",["$scope","$state","$cookieStore","$window","$timeout","GroupService","ScrollDownService","HelperService","SelectService",function(t,r,e,o,n,a,u,p,s){t.groups=[],t.params=e.get("caroa.group.params"),null==t.params?t.params={offset:0,length:p.PAGE_LIMIT}:e.remove("caroa.group.params"),t.refreshDataList=function(r){s.clean(),t.emptyList=!1,t.groups.length>p.PAGE_LIMIT?t.params.length=t.groups.length:t.params.length=p.PAGE_LIMIT,a.getGroupList(t.params,t.token).success(function(o){p.getAPICode(o,function(){t.groups=o.data,t.groups.shift(),0==t.groups.length?t.emptyList=!0:r&&t.groups.length>=p.PAGE_LIMIT&&(t.toEnd=!1)},function(){alertError(o.msg)})})},t.toEnd=!0,t.refreshDataList(!0),t.flip=function(){var o=p.clone(t.params);o.offset=t.groups.length,o.length=p.PAGE_LIMIT,a.getGroupList(o,t.token).success(function(o){p.getAPICode(o,function(){o.data&&0<o.data.length?(o.data.forEach(function(o){t.groups.push(o)}),o.data.length<p.PAGE_LIMIT&&(t.toEnd=!0)):t.toEnd=!0},function(){alertError(o.msg)})})},t.isEmpty=function(o){return p.isEmpty(o)},t.newGroup=function(){e.put("caroa.group.from","app.group.list"),e.put("caroa.group.params",t.params),r.go("app.group.add")},t.seeGroup=function(o){e.put("caroa.group.from","app.group.list"),e.put("caroa.group.params",t.params),r.go("app.group.detail",{groupId:o})}}]),app.controller("groupDetailController",["$scope","$state","$cookieStore","GroupService","HelperService","$stateParams",function(r,t,e,o,n,a){var u=a.groupId;r.group={},o.getGroupById(u,r.token).success(function(o){n.getAPICode(o,function(){r.group=o.data},function(){alertError(o.msg)})}),r.isEdit=1==Boolean(a.isEdit),r.from=e.get("caroa.group.from"),null==r.from&&(r.from="app.group.list"),r.fromPage=n.getFromPage(r.from),r.editIt=function(){r.isEdit=!0},r.editGroup=function(o){e.put("caroa.group.from","app.group.list"),e.put("caroa.group.params",r.params),t.go("app.group.add",{groupId:u,isEdit:1})},r.cancel=function(){r.isEdit=!1,o.getGroupById(u,r.token).success(function(o){n.getAPICode(o,function(){r.group=o.data},function(){alertError(o.msg)})})}}]),app.controller("groupAddController",["$scope","$state","$cookieStore","GroupService","HelperService","$stateParams",function(r,t,o,e,n,a){r.group={};var u=a.groupId;u&&e.getGroupById(u,r.token).success(function(o){n.getAPICode(o,function(){r.group=o.data},function(){alertError(o.msg)})}),r.add=function(){u?e.updateGroup(r.group,r.token).success(function(o){n.getAPICode(o,function(){r.isEdit=!1,alertSuccess("成功更新一条分组信息！"),t.go("app.group.detail",{groupId:u})},function(){alertError(o.msg)})}):e.addGroup(r.group,r.token).success(function(o){n.getAPICode(o,function(){alertSuccess("成功新建一条分组信息！"),t.go("app.group.list")},function(){alertError(o.msg)})})};r.addAndNew=function(){e.addGroup(r.group,r.token).success(function(o){n.getAPICode(o,function(){alertSuccess("成功新建一个分组信息！")},function(){alertError(o.msg)})})}}]);